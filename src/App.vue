<template>
  <div v-if="isImagesLoaded" class="h-full w-full p-3 flex flex-col items-center">
    <div  class="flex flex-col items-center">
      <n-image-group>
        <n-image v-for="(imageSrc, index) in images" :key="index"  class="h-[500px]  max-sm:w-11/12"
            :src="imageSrc" v-show="currentIndex == index" />
      </n-image-group>
    </div>


    <n-slider class="w-[500px] pt-3 max-sm:w-10/12" :step="1" :format-tooltip="formatTooltip" :min="0"
      :max="images.length - 1" v-model:value="currentIndex" />
    <div class="p-3">
      <button class="border rounded-md p-2 bg-gray-300 text-black" @click="showModal = true">选择资源</button>
    </div>
  </div>
  <div v-else class="p-3">
    <n-result status="404" title="404 资源不存在" description="生活总归带点荒谬">
      <template #footer>
        <n-button @click="showModal = true">找点乐子吧</n-button>
      </template>
    </n-result>
  </div>

  <n-modal v-model:show="showModal">
    <n-card class="w-1/2 max-sm:w-11/12" :bordered="false" size="huge" role="dialog" aria-modal="true" closable
      @close="showModal = false">
      <template #header>
        <div class="border-b">
          <span>欢迎使用</span>
        </div>

      </template>
      <template #default>
        <n-spin :show="Loading" size="large">
          <template #description>
            <p>{{ loadingStatus }}/ 总共 {{ images.length }} 张图片</p>
          </template>
          <div>
            <div>
              <span>选择图片资源</span>
            </div>
            <div>
              <div class="flex flex-wrap justify-center">
                <n-popover trigger="hover">
                  <template #trigger>
                    <button @click="defaultImageRequest"
                      class=" min-w-40 h-[70px] m-2 border p-2 bg-blue-300 rounded-lg flex items-center justify-center">
                      <svg class=" w-8 h-8" t="1707960253714" viewBox="0 0 1033 1024" version="1.1"
                        xmlns="http://www.w3.org/2000/svg" p-id="3593" width="200" height="200">
                        <path d="M512 512m-499.2 0a499.2 499.2 0 1 0 998.4 0 499.2 499.2 0 1 0-998.4 0Z" fill="#2c2c2c"
                          fill-opacity=".3" p-id="3594"></path>
                        <path
                          d="M13.4144 536.8832A507.4816 507.4816 0 0 1 12.8 512C12.8 236.288 236.288 12.8 512 12.8c134.464 0 256.512 53.1584 346.2656 139.6096-7.1936 13.1328-18.2528 22.8992-28.5696 31.7056-17.1392 14.656-21.12-14.6432-34.3808-62.9888s-113.792-20.736-113.792 0 90.2272 29.6064-2.5984 79.296c-27.84 14.8992-65.1136 16.2176-87.8464 27.648-12.1344 6.0928-6.528 44.1856-14.6176 59.3152-6.272 11.776-26.8288 2.4064-31.68 0-24.8192-12.288-7.8336-80.9472-27.1104-86.9632-26.3168-8.2304-50.2784 27.4304-50.2784 40.64 0 15.0656 22.464 94.72 0 151.0784-24.8832 62.4256-104.5504 120.7936-156.2624 110.2976-98.4064-19.968-122.4448-48.4608-143.7184-19.968-21.2864 28.4928 12.9664 94.976 37.5552 135.6544 24.576 40.6656 2.56 92.2624-24.5888 92.2624-36.544 0-79.7824-46.6816-102.8096-92.2624-11.4048-22.5664-32.7936-49.664-64.1536-81.2416z m466.3936 246.7456c55.8336-38.3232 121.7664-60.6976 185.28-38.3232 63.488 22.3616 85.376 158.2976 31.616 200.0256-53.76 41.728-106.112 14.1696-128.7296 0-22.6176-14.1824-155.9936 14.1696-177.984 0-21.9904-14.1824-45.824-44.0832-45.824-99.776 0-55.68 79.808-23.616 135.6416-61.9264z m-171.392-146.7136c12.288-25.4208 40.64 7.168 57.3056-39.68 16.6656-46.8736 31.616-56.6784 49.344-26.5984 17.7408 30.08 13.376 62.7968 0 82.5344-13.376 19.7248-12.7872 15.5008-48.768 15.5008-35.968 0-70.1952-6.336-57.8944-31.7568zM473.0112 435.2c13.0176 1.3824 19.52 5.824 19.52 13.3504 0 11.2768-9.7536 26.9056-9.7536 26.9056s-27.1616 15.2576-33.28 8.704c-6.0928-6.528 8.1664-22.272 8.1664-35.6096 0-8.896 5.12-13.3504 15.36-13.3504z m24.6016 206.3488c28.9536-16.0512 51.7632-18.6368 68.4032-7.744 24.96 16.3456 87.2448 28.9024 87.2448 36.4928v25.0368c-51.9296-2.9824-85.248-11.328-99.9424-25.0368-22.0416-20.5568-66.9312 9.0368-66.9312 0 0-6.016 3.7376-15.6032 11.2256-28.7488z"
                          fill="#2c2c2c" p-id="3595"></path>
                      </svg><span class="ml-2 text-blue-900">默认图片资源</span></button>
                  </template>
                  <span>不知道选什么，选择这个就对了。但是他有很大概率失败</span>
                </n-popover>
              </div>
              <n-spin :show="imagesDataLoading" size="large">
                <template #description>
                  <p>加载中...</p>
                </template>
                <div class="flex flex-wrap justify-center">
                  <div v-for="(data, index) in networkData">
                    <n-popover trigger="hover">
                      <template #trigger>
                        <button @click="loadAllImages(data.images)" :class="{
                          'bg-red-300 text-red-900': data.region === 'cn',
                          'bg-gray-300 text-gray-900': data.region === 'global'
                        }" class=" min-w-40 h-[70px] m-2 border p-2 rounded-lg flex items-center justify-center">
                          <svg v-if="data.region === 'cn'" t="1707961905117" class=" w-8 h-8" viewBox="0 0 1037 1024"
                            version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21213" width="200" height="200">
                            <path
                              d="M421.13004699 587.087927l94.772288-94.771435L622.44443399 598.859445 527.67299999 693.63088zM409.20571799 377.225551l94.771435-94.771435 106.542953 106.542953L515.74867099 483.768504zM724.46027399 487.200333l84.003001-84.003001 95.613173 20.317799 21.427594 93.649688S908.17415499 578.374323 872.91679799 578.288954c-35.257357-0.170738-159.810588-66.758483-148.456524-91.088621zM281.99324599 487.200333s-40.46486-62.746144-66.502376-64.368153c-26.122885-1.622009-101.759733 65.990163-26.378991 143.931972 81.01509-45.416257 92.881367-79.563818 92.881367-79.563819z"
                              fill="#FF5978" p-id="21214"></path>
                            <path
                              d="M407.40016599 406.526719h-0.170738c-5.548979-0.085369-10.841851-2.30496-14.76882-6.317298l-0.939058-0.939058c-7.939308-8.280784-7.76857-21.342226 0.512213-29.366903l53.355565-51.477449c8.195415-7.939308 21.256857-7.76857 29.196165 0.341475 8.024677 8.110046 7.939308 21.171488-0.170738 29.196166l-52.416507 52.416506c-3.841601 4.012338-9.049104 6.146561-14.598082 6.146561zM459.81667299 667.840934c-5.207503 0-10.415006-1.963485-14.427345-5.805086l-53.355565-51.477449c-8.280784-7.939308-8.451521-21.086119-0.512213-29.366903l0.939058-0.939057c3.841601-4.012338 9.219842-6.317299 14.76882-6.317299h0.170738c5.46361 0 10.756482 2.219591 14.683451 6.061192l52.416507 52.416507c8.024677 8.024677 8.110046 21.086119 0.170738 29.196165-4.097707 4.183076-9.475948 6.23193-14.854189 6.23193z"
                              fill="#333333" p-id="21215"></path>
                            <path
                              d="M406.46110799 616.363485c-5.378241 0-10.585744-2.048854-14.427345-5.805086L282.93230399 505.213172c-4.012338-3.92697-6.317299-9.305211-6.317299-14.939558s2.30496-11.012589 6.317299-14.939558l109.101459-105.345227c3.92697-3.841601 9.305211-5.890454 14.768821-5.805086 5.46361 0.085369 10.756482 2.390329 14.598082 6.317299l101.759733 105.345227c7.76857 8.024677 7.76857 20.830013 0 28.85469L421.40066599 610.046186c-3.841601 3.92697-9.049104 6.23193-14.598082 6.317299h-0.341476z m-79.222343-126.089871l78.710129 76.063693 73.417258-76.063693-73.417258-76.063693-78.710129 76.063693z"
                              fill="#333333" p-id="21216"></path>
                            <path
                              d="M510.09895699 512.896373c-5.46361 0-10.841851-2.134223-14.939558-6.317298l-1.878116-1.963485c-7.76857-8.024677-7.76857-20.744644 0-28.769321l1.878116-1.963485c3.841601-4.012338 9.049104-6.23193 14.598082-6.402667 5.548979-0.085369 10.841851 1.963485 14.768821 5.805085l2.048853 1.963485c4.012338 3.92697 6.317299 9.305211 6.317299 14.939558s-2.30496 11.012589-6.402667 14.939558l-2.048854 1.963485c-3.92697 3.92697-9.134473 5.805085-14.341976 5.805085zM459.81667299 354.110213c-5.378241 0-10.756482-2.048854-14.768821-6.23193-8.024677-8.110046-7.939308-21.171488 0.170738-29.196165l53.099458-53.099459c3.92697-3.92697 9.305211-6.146561 14.85419-6.061192 5.548979 0.085369 10.841851 2.30496 14.76882 6.317299l0.939058 0.939058c3.841601 3.92697 5.890454 9.305211 5.805085 14.76882-0.085369 5.46361-2.390329 10.756482-6.317299 14.598083L474.24401699 348.305127c-4.012338 3.841601-9.219842 5.805085-14.427344 5.805086z"
                              fill="#333333" p-id="21217"></path>
                            <path
                              d="M564.22284199 561.300542c-5.207503 0-10.415006-1.963485-14.427345-5.805086l-51.221342-49.428595c-4.012338-3.841601-6.317299-9.219842-6.317299-14.76882s2.219591-10.92722 6.146561-14.854189l0.853689-0.853689c8.110046-8.024677 21.171488-7.939308 29.281534 0.085368l50.367653 50.367654c8.024677 8.024677 8.110046 21.086119 0.085369 29.196165-4.012338 4.012338-9.390579 6.061192-14.76882 6.061192z"
                              fill="#333333" p-id="21218"></path>
                            <path
                              d="M513.94055799 511.018258c-5.46361 0-10.756482-2.219591-14.683452-6.061193l-0.853689-0.853689c-3.92697-3.92697-6.146561-9.305211-6.061192-14.854189 0.085369-5.548979 2.30496-10.841851 6.317299-14.76882l51.221342-49.428595c8.195415-7.939308 21.256857-7.76857 29.196165 0.341475 8.024677 8.110046 7.939308 21.171488-0.085369 29.196165l-50.367653 50.367653c-3.92697 3.841601-9.219842 6.061192-14.683451 6.061193zM406.54647699 405.587662c-5.46361 0-10.841851-2.134223-14.939558-6.317299l-47.721218-49.428596c-17.15915-17.842101-26.635098-41.318549-26.635097-66.246269 0-26.208253 10.329637-50.538391 29.025427-68.636598 37.818424-36.537891 98.259608-35.428095 134.797499 2.390329l46.782159 48.489537c7.853939 8.110046 7.76857 21.086119-0.256107 29.110796l-53.099458 53.099458-0.256107 0.256107-53.355564 51.477449c-4.012338 3.92697-9.219842 5.805085-14.341976 5.805086z m5.890454-175.774573c-13.488287 0-26.976574 5.036765-37.39158 15.110296-10.500375 10.1589-16.305461 23.903293-16.30546 38.757482 0 14.085869 5.292872 27.318049 15.024927 37.39158l33.293872 34.489037 38.245269-36.964735 38.501376-38.501376L451.19441299 246.289287c-10.585744-10.92722-24.671613-16.476198-38.757482-16.476198z"
                              fill="#333333" p-id="21219"></path>
                            <path
                              d="M512.14781099 511.018258c-5.207503 0-10.415006-1.963485-14.427345-5.805086l-2.048854-1.963485c-8.195415-7.939308-8.451521-21.086119-0.512213-29.366903l0.939058-0.939057c3.841601-4.012338 9.219842-6.317299 14.76882-6.317299h0.170738c5.46361 0 10.756482 2.219591 14.683451 6.061192l2.048854 2.048854c3.92697 3.92697 6.146561 9.305211 6.061192 14.854189-0.085369 5.548979-2.30496 10.92722-6.317299 14.76882l-0.939058 0.853689c-4.012338 3.841601-9.219842 5.805085-14.427344 5.805086zM412.43693099 792.052689c-24.842351 0-48.318799-9.475948-66.1609-26.635098-18.69579-18.098208-29.025427-42.428345-29.025427-68.55123 0-24.92772 9.475948-48.404168 26.635097-66.246269l47.721218-49.428596c7.939308-8.280784 21.086119-8.451521 29.366903-0.512213L474.24401699 632.156732l0.256107 0.256107 53.099458 53.099458c8.024677 8.024677 8.110046 20.915381 0.256107 29.110796L481.07352999 763.027261c-17.671363 18.268945-41.403918 28.598583-66.929221 29.025428h-1.707378z m-5.378241-167.066945l-33.293872 34.489037c-9.646686 10.073531-15.024927 23.305711-15.024927 37.39158 0 14.76882 5.805085 28.598583 16.30546 38.757482 10.329637 9.902793 23.903293 15.281034 38.330638 15.024927 14.427345-0.256107 27.830263-6.061192 37.818424-16.30546l32.610922-33.806086-38.501376-38.501376-38.245269-37.050104z"
                              fill="#333333" p-id="21220"></path>
                            <path
                              d="M512.91613099 720.940392c-5.46361 0-10.756482-2.219591-14.683452-6.061192l-53.099458-53.099458c-8.024677-8.024677-8.110046-21.086119-0.170738-29.196166s21.00075-8.280784 29.196166-0.341475l53.953147 52.1604c3.92697 3.841601 6.23193 9.049104 6.317299 14.598083 0.085369 5.46361-1.963485 10.841851-5.805086 14.76882l-0.939058 0.939058c-3.841601 4.012338-9.219842 6.317299-14.76882 6.317299 0.085369-0.085369 0.085369-0.085369 0-0.085369zM513.08686899 511.871947c-5.122134 0-10.329637-1.878116-14.341976-5.719717l-0.939058-0.853689c-4.097707-3.92697-6.402668-9.305211-6.488037-14.939558 0-5.634348 2.30496-11.097957 6.317299-15.024927l0.939058-0.853689c8.110046-7.853939 21.086119-7.76857 29.110796 0.256107l0.853689 0.853689c3.92697 3.92697 6.061192 9.219842 6.061192 14.76882s-2.219591 10.841851-6.146561 14.683451l-0.853689 0.853689c-4.012338 4.012338-9.305211 5.975823-14.512713 5.975824z"
                              fill="#333333" p-id="21221"></path>
                            <path
                              d="M511.03801499 513.9208h-0.170738c-5.548979-0.085369-10.841851-2.30496-14.76882-6.317299l-0.939058-0.939057c-3.841601-3.92697-5.890454-9.305211-5.805086-14.768821 0.085369-5.548979 2.390329-10.756482 6.402668-14.598082l2.048854-1.963485c8.024677-7.683201 20.659275-7.76857 28.683952-0.085369l0.939057 0.853689c4.012338 3.841601 6.402668 9.219842 6.402668 14.76882 0.085369 5.634348-2.134223 11.012589-6.061192 14.939558l-2.048854 2.048854c-3.92697 3.841601-9.134473 6.061192-14.683451 6.061192zM682.62951099 682.524385c-7.085619 0-14.0005-3.670863-17.8421-10.158899-1.878116-3.158649-4.183076-6.146561-6.829513-8.792997l-56.08737-56.08737c-8.024677-8.024677-8.110046-20.915381-0.256106-29.110796l0.853689-0.939058c3.841601-3.92697 9.049104-6.23193 14.598082-6.317299 5.548979-0.085369 10.841851 1.963485 14.768821 5.805085l49.428595 47.721217c8.451521 8.195415 15.281034 17.756732 20.147061 28.342476 4.609921 10.073531 0.597582 21.939808-9.219841 27.061943-2.987912 1.707378-6.317299 2.475698-9.561318 2.475698z"
                              fill="#333333" p-id="21222"></path>
                            <path
                              d="M616.55397999 613.63168c-5.46361 0-10.756482-2.219591-14.683452-6.061192L549.62475899 555.324719c-8.024677-8.024677-8.110046-21.086119-0.085368-29.196165 8.024677-8.110046 21.00075-8.280784 29.196165-0.341476l53.184827 51.39208c8.280784 7.939308 8.451521 21.086119 0.512213 29.366903l-0.853689 0.939058c-3.841601 4.012338-9.219842 6.317299-14.76882 6.317299-0.170738-0.170738-0.170738-0.170738-0.256107-0.170738z"
                              fill="#333333" p-id="21223"></path>
                            <path
                              d="M513.85518899 720.001334c-5.207503 0-10.415006-1.963485-14.427345-5.805086L445.38932799 662.035848l-0.256107-0.256106-52.416507-52.416507c-8.024677-8.024677-8.110046-20.915381-0.256106-29.110796l100.820675-104.40617c3.92697-4.012338 9.305211-6.317299 14.939558-6.317299 2.048854 0 4.097707 0.341476 6.061192 0.939058 4.780659 0.256107 9.475948 2.219591 13.146811 5.805086l51.221343 49.428595 0.256106 0.256107 52.245769 52.245769c8.024677 8.024677 8.110046 20.915381 0.256107 29.110796L528.70937799 713.684035c-4.012338 4.183076-9.475948 6.317299-14.854189 6.317299z m-39.440434-87.673864l38.92822 37.562317 74.185578-76.746644-37.733056-37.733055-39.098958-37.733056-74.185577 76.746645 37.903793 37.903793z"
                              fill="#333333" p-id="21224"></path>
                            <path
                              d="M508.30620999 511.018258c-5.634348 0-11.012589-2.30496-14.939558-6.317299L392.46060799 400.209421c-7.853939-8.110046-7.76857-21.086119 0.256106-29.110797l52.416507-52.416506 0.256107-0.256107 53.953147-52.1604c8.280784-7.939308 21.342226-7.76857 29.366903 0.512213l102.698791 106.369654c7.853939 8.110046 7.76857 21.086119-0.256107 29.110796L578.90629299 454.589412l-0.256106 0.256107-51.221343 49.428595c-3.670863 3.585494-8.366153 5.46361-13.061442 5.805086-1.963485 0.597582-4.012338 0.939058-6.061192 0.939058z m-71.795248-124.980075l74.185577 76.746644 39.098958-37.733055 37.733056-37.733056-74.185578-76.746644-38.92822 37.562317-37.903793 37.903794z"
                              fill="#333333" p-id="21225"></path>
                            <path
                              d="M564.30821099 460.650604c-5.378241 0-10.756482-2.048854-14.76882-6.23193-8.024677-8.110046-7.939308-21.171488 0.085368-29.196165l52.245769-52.245769c3.92697-3.92697 9.305211-6.146561 14.85419-6.061192 5.548979 0.085369 10.841851 2.30496 14.76882 6.317299l0.853689 0.939058c7.939308 8.280784 7.683201 21.342226-0.512213 29.366903l-53.184827 51.39208c-4.012338 3.756232-9.219842 5.719717-14.341976 5.719716zM615.01733999 788.552564c-24.92772 0-48.404168-9.475948-66.24627-26.635098l-49.428595-47.721218c-8.280784-7.939308-8.451521-21.086119-0.512213-29.366902l102.698791-106.369654c3.841601-4.012338 9.219842-6.317299 14.76882-6.317299h0.170738c5.46361 0 10.756482 2.219591 14.683451 6.061192l56.08737 56.08737c5.122134 5.122134 9.475948 10.756482 13.146811 16.988411 0.341476 0.597582 0.682951 1.195165 0.939058 1.878116 16.476198 35.598833 9.305211 78.368654-17.842101 106.455023-17.92747 18.610421-42.342976 28.940058-68.46586 28.940059zM543.13672299 698.744477l34.489037 33.293872c10.073531 9.646686 23.305711 15.024927 37.39158 15.024927 14.76882 0 28.598583-5.805085 38.757482-16.30546 15.110296-15.622509 19.208003-39.269696 10.500375-59.246019-1.792747-2.817174-3.841601-5.46361-6.23193-7.85394L616.81008699 622.424677 543.13672299 698.744477z"
                              fill="#333333" p-id="21226"></path>
                            <path
                              d="M617.40766899 409.343893h-0.341476c-5.46361-0.085369-10.756482-2.390329-14.598082-6.317299l-0.853689-0.939058c-7.853939-8.110046-7.76857-21.086119 0.256106-29.110796l56.08737-56.087369c2.646436-2.646436 4.951396-5.548979 6.829513-8.792998 5.634348-9.475948 17.756732-12.976073 27.488787-7.76857 9.817424 5.122134 13.829762 17.073781 9.219841 27.061943-4.951396 10.671113-11.69554 20.147061-20.147061 28.342476l-49.428595 47.721217c-3.92697 3.756232-9.134473 5.890454-14.512714 5.890454z"
                              fill="#333333" p-id="21227"></path>
                            <path
                              d="M616.55397999 408.404835h-0.170738c-5.548979-0.085369-10.841851-2.30496-14.76882-6.317299L498.91563099 295.632514c-7.939308-8.280784-7.76857-21.342226 0.512213-29.366903l49.428595-47.721218c17.842101-17.15915 41.318549-26.635098 66.24627-26.635097 26.122885 0 50.538391 10.329637 68.636598 29.025427 27.147311 28.086369 34.318299 70.85619 17.842101 106.455023-0.256107 0.597582-0.597582 1.280534-0.939058 1.878116-3.670863 6.146561-8.110046 11.866278-13.146811 16.988411l-56.08737 56.08737c-4.097707 3.841601-9.390579 6.061192-14.854189 6.061192z m-73.417257-126.687453l73.673364 76.234431 41.147811-41.147811c2.390329-2.390329 4.524552-5.036765 6.23193-7.853939 8.792997-19.890955 4.609921-43.62351-10.500375-59.24602-10.1589-10.500375-23.903293-16.305461-38.757482-16.30546-14.085869 0-27.318049 5.292872-37.39158 15.024927l-34.403668 33.293872z m139.492788 36.964736z"
                              fill="#333333" p-id="21228"></path>
                            <path
                              d="M617.40766899 612.692622c-5.378241 0-10.585744-2.048854-14.427345-5.805086l-53.184827-51.39208-0.256106-0.256106-50.367654-50.367653c-8.110046-8.110046-8.110046-21.256857 0-29.366903l50.367654-50.367654 0.256106-0.256106 53.184827-51.39208c3.92697-3.841601 9.305211-5.890454 14.768821-5.805086 5.46361 0.085369 10.756482 2.390329 14.598082 6.317299l98.08887 101.674364c7.76857 8.024677 7.76857 20.744644 0 28.85469L632.34722699 606.375323c-3.841601 3.92697-9.049104 6.23193-14.598082 6.317299h-0.341476z m-38.586745-86.905544l38.074532 36.793997 69.746394-72.307461-69.746394-72.39283-38.074532 36.793997-35.513463 35.513464 35.513463 35.598833zM613.30996199 794.27228c-22.025177 0-44.050354-8.366153-60.78266-25.183826l-54.209254-54.209254c-8.024677-8.024677-8.110046-20.915381-0.256106-29.110796l0.939058-0.939058c3.841601-3.92697 9.049104-6.23193 14.598082-6.317299 5.46361-0.085369 10.841851 1.963485 14.76882 5.805085l49.428596 47.721217c10.073531 9.646686 23.305711 15.024927 37.391579 15.024927 14.76882 0 28.598583-5.805085 38.757483-16.30546 15.281034-15.878616 19.378741-40.038016 9.988161-60.185077-4.609921-10.073531-0.597582-21.939808 9.219842-27.061943s21.854439-1.707378 27.488787 7.853939c19.976323 33.891455 14.598083 76.917382-13.146811 104.662276l-13.23218 13.23218c-16.903043 16.561567-38.92822 25.013089-60.953397 25.013089zM682.62951099 339.426761c-3.244018 0-6.573406-0.76832-9.646686-2.390329-9.817424-5.122134-13.829762-17.073781-9.219841-27.061943 9.305211-20.147061 5.292872-44.306461-9.988162-60.185077-10.1589-10.500375-23.903293-16.305461-38.757482-16.30546-14.085869 0-27.318049 5.378241-37.39158 15.024927l-49.428595 47.721217c-3.92697 3.841601-9.305211 5.890454-14.768821 5.805085-5.46361-0.085369-10.756482-2.390329-14.598082-6.317299l-0.939058-0.939057c-7.853939-8.110046-7.76857-21.086119 0.256106-29.110797l54.209254-54.209254c33.549979-33.549979 88.100709-33.549979 121.650688 0l13.23218 13.232181c27.744894 27.744894 33.208504 70.770821 13.146811 104.662276-3.756232 6.402668-10.671113 10.073531-17.756732 10.07353z"
                              fill="#333333" p-id="21229"></path>
                            <path
                              d="M841.58640999 599.118966c-14.085869 0-28.171738-2.902543-41.574656-8.878366-26.720467-11.780909-47.46511-31.757232-62.660775-46.355314l-0.426845-0.426845c-16.476198-16.903043-33.549979-34.318299-33.293872-56.172739-0.256107-21.854439 16.817674-39.355065 33.293872-56.172738l0.426845-0.426845c15.195665-14.598083 35.940308-34.574406 62.660775-46.355314 30.732805-13.573656 65.136474-11.439433 94.503376 5.805085 35.001251 20.23243 57.197165 58.306961 56.684952 97.235181 0.512213 38.842851-21.683702 77.002751-56.684952 97.235182-16.476198 9.561317-34.659775 14.512714-52.92872 14.512713z m-75.210004-84.942059c13.659025 13.061442 30.562068 29.281534 50.453022 38.074531 18.354314 8.110046 39.013589 6.744143 56.770321-3.670863 0.085369 0 0.085369-0.085369 0.170738-0.085369 18.268945-10.500375 36.452522-33.46461 35.940308-60.953397v-0.76832c0.512213-27.488787-17.756732-50.367653-35.940308-60.953397-0.085369 0-0.085369-0.085369-0.170738-0.085369-17.671363-10.415006-38.416007-11.780909-56.770321-3.670863-19.890955 8.792997-36.793997 25.013089-50.453022 38.074531-6.402668 6.573406-20.744644 21.342226-21.256857 26.549729v0.939058c0.512213 5.207503 14.854189 19.976323 21.256857 26.549729zM174.94064099 599.118966c-18.183576 0-36.367153-4.951396-52.92872-14.683451-35.001251-20.23243-57.197165-58.306961-56.684952-97.235182-0.512213-38.842851 21.683702-77.002751 56.684952-97.149812 29.366903-17.244519 63.770571-19.378741 94.503376-5.805085 26.720467 11.780909 47.46511 31.757232 62.660775 46.355314l0.426845 0.426845c16.476198 16.903043 33.549979 34.318299 33.293872 56.172738 0.256107 21.854439-16.817674 39.355065-33.293872 56.172739l-0.426845 0.426845c-15.195665 14.598083-35.940308 34.574406-62.660775 46.355314-13.488287 5.975823-27.574156 8.963735-41.574656 8.963735z m0-182.17724c-11.012589 0-22.025177 2.987912-32.013339 8.878366-0.085369 0-0.085369 0.085369-0.170738 0.085369-18.268945 10.500375-36.452522 33.46461-35.940308 60.953397v0.76832c-0.512213 27.488787 17.756732 50.367653 35.940308 60.953397 0.085369 0 0.085369 0.085369 0.170738 0.085369 17.671363 10.415006 38.416007 11.780909 56.770321 3.670863 19.890955-8.792997 36.793997-25.013089 50.453022-38.074531 6.402668-6.573406 20.744644-21.342226 21.256857-26.549729v-0.939058c-0.426845-5.122134-14.854189-19.890955-21.256857-26.378991-13.659025-13.061442-30.562068-29.281534-50.453022-38.074531-7.939308-3.670863-16.39083-5.378241-24.756982-5.378241zM579.16239999 1024c-11.439433 0-20.744644-9.305211-20.744644-20.744644V889.117132c0-27.659525-22.537391-50.196915-50.196915-50.196915S458.02392599 861.457607 458.02392599 889.117132v114.138224c0 11.439433-9.305211 20.744644-20.744644 20.744644s-20.744644-9.305211-20.744643-20.744644V889.117132c0-50.538391 41.147812-91.686203 91.686202-91.686202S599.90704399 838.578741 599.90704399 889.117132v114.138224c0 11.439433-9.305211 20.744644-20.744644 20.744644z"
                              fill="#333333" p-id="21230"></path>
                            <path
                              d="M508.22084099 89.381242m-68.55123 0a68.55123 68.55123 0 1 0 137.10246 0 68.55123 68.55123 0 1 0-137.10246 0Z"
                              fill="#FFFFFF" p-id="21231"></path>
                            <path
                              d="M508.30620999 178.677115c-49.257857 0-89.295873-40.038016-89.295873-89.295873S458.96298399 0 508.30620999 0s89.295873 40.123385 89.295873 89.381242-40.038016 89.295873-89.295873 89.295873z m0-137.187828c-26.378991 0-47.806586 21.427595-47.806586 47.806586s21.427595 47.806586 47.806586 47.806586 47.806586-21.427595 47.806586-47.806586-21.512964-47.806586-47.806586-47.806586z"
                              fill="#333333" p-id="21232"></path>
                          </svg>
                          <svg v-else t="1707961997854" class=" w-8 h-8" viewBox="0 0 1024 1024" version="1.1"
                            xmlns="http://www.w3.org/2000/svg" p-id="22303" width="200" height="200">
                            <path
                              d="M986.069333 682.88c-18.858667-29.098667-58.752-36.010667-88.746666-18.688l-137.301334 79.232-195.712-108.672-73.941333 42.666667 145.92 137.472-109.013333 62.933333-94.421334-44.032-55.424 32 177.066667 116.906667a42.666667 42.666667 0 0 0 44.8 1.322666l69.546667-40.106666 295.594666-170.666667a64 64 0 0 0 21.632-90.368"
                              fill="#8BB3F1" p-id="22304"></path>
                            <path
                              d="M512 42.666667C253.184 42.666667 42.666667 253.184 42.666667 512c0 158.549333 79.232 305.28 211.882666 392.490667l46.890667-71.338667a390.101333 390.101333 0 0 1-43.904-33.706667l59.690667-97.834666a64.426667 64.426667 0 0 0-15.616-84.522667 85.418667 85.418667 0 0 1-30.421334-88.917333l12.074667-46.762667A80.938667 80.938667 0 0 0 237.397333 386.986667l-75.050666-32.896a385.706667 385.706667 0 0 1 209.792-199.338667l-12.501334 33.493333a167.338667 167.338667 0 0 0 81.834667 208.426667l35.157333 17.578667a188.416 188.416 0 0 1 80.469334 77.013333l57.173333 102.912c23.893333 43.093333 85.333333 44.629333 111.445333 2.858667l41.216-65.962667a132.394667 132.394667 0 0 0 6.144-129.450667 53.76 53.76 0 0 1 20.48-70.229333l42.069334-25.216a381.44 381.44 0 0 1 56.405333 261.205333l84.48 12.202667C979.712 557.354667 981.333333 534.613333 981.333333 512c0-258.816-210.517333-469.333333-469.333333-469.333333"
                              fill="#1768E4" p-id="22305"></path>
                          </svg>
                          <span class="ml-2 ">{{ data.name }}</span></button>
                      </template>
                      <div class="">
                        <a class="text-blue-900" :href="data.author.website" target="_blank">{{ data.description }}</a>
                      </div>
                    </n-popover>
                  </div>

                </div>
              </n-spin>
            </div>
          </div>
        </n-spin>
      </template>
      <template #footer>
        <div class=" border-t">
          <span class=" font-thin">图片加载需要较大网络数据,所以采用先加载图片再展示的模式,请耐心等待...</span>
        </div>
      </template>
    </n-card>
  </n-modal>
</template>


<script setup>
import { ref, computed, onMounted } from 'vue';
const showModal = ref(true);
// 动态生成图片路径数组
const images = ref([]);
const networkData = ref([]);
const Loading = ref(false);
const imagesDataLoading = ref(false);
const isImagesLoaded = ref(false);
const loadedImagesCount = ref(0);
const loadingStatus = computed(() => `已加载 ${loadedImagesCount.value} 张图片`);
const formatTooltip = (value) => `${value + 1}`;
const currentIndex = ref(0);
function loadAllImages(data) {
  if (data) {
    images.value = data
  }
  Loading.value = true;
  loadedImagesCount.value = 0; // 重置已加载图片计数
  const loadPromises = images.value.map(src => {
    return new Promise((resolve, reject) => {
      const img = new Image();
      img.onload = () => {
        loadedImagesCount.value++; // 图片加载成功，计数加1
        resolve();
      };
      img.onerror = reject;
      img.src = src;
    });
  });

  Promise.all(loadPromises)
    .then(() => {
      isImagesLoaded.value = true; // 所有图片加载完成
      Loading.value = false;
    })
    .catch(error => console.error("Failed to load images", error));
}
function defaultImageRequest() {
  for (let i = 1; i <= 41; i++) {
    const imagePath = new URL(`./assets/images/${i}.webp?cache`, import.meta.url).href;
    images.value.push(imagePath);
  }
  loadAllImages()
}

async function networkImageRequest() {
  imagesDataLoading.value = true; // 开始加载

  // 封装请求逻辑为一个异步函数
  async function fetchData(url) {
    const response = await fetch(url);
    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
    return await response.json();
  }

  // 尝试请求的URL列表
  const urls = [
    'https://assets-json.pnglog.com/kumufengchun.json',
    'https://cors-anywhere.pnglog.com/https://assets-json.pnglog.com/kumufengchun.json',
    'https://raw.githubusercontent.com/ZenEcho/kmfc/main/kumufengchun.json',
    'https://cors-anywhere.pnglog.com/https://raw.githubusercontent.com/ZenEcho/kmfc/main/kumufengchun.json'
  ];

  // 遍历URL列表尝试获取数据
  for (const url of urls) {
    try {
      const data = await fetchData(url);
      networkData.value = data; // 成功获取数据
      data.forEach(item => console.log(item));
      imagesDataLoading.value = false;
      break; // 成功后跳出循环
    } catch (error) {
      console.error(`Failed to load images from ${url}`, error);
      // 如果所有URL都尝试失败，则在循环结束后处理
    }
  }
}


// vue 加载完毕执行
onMounted(() => {
  networkImageRequest()
});
</script>
